@model Reddit.ViewModels.Home.PostIndexVM

@{
    ViewBag.Title = "reddit";
}

@section styles
{
    <link href="~/Content/css/home.css" rel="stylesheet" />
}

<section class="columns post-group" id="frontpage">
    @if (Reddit.Models.AuthenticationManager.LoggedUser != null)
    {

        foreach (var subscribedSubreddit in Model.SubReddits)
        {
            foreach (var post in Model.Posts.Where(p => p.SubRedditId == subscribedSubreddit.Id))
            {
                Html.RenderPartial("~/Views/Partials/_Post.cshtml", post);
            }
        }
    }
    else
    {
        foreach (var post in Model.Posts)
        {
             Html.RenderPartial("~/Views/Partials/_Post.cshtml", post); 
        }
    }
</section>

<aside id="aside" class="text-center">
    @if (Reddit.Models.AuthenticationManager.LoggedUser != null)
    {
        <a href="/Posts/Create">Create Post</a>
        <a href="/SubReddit/Edit"> Create SubReddit</a>
    }
    else
    {
        <a href="/Home/Login">
            Create Post
        </a>
        <a href="/Home/Login">
            Create SubReddit
        </a>
    }
</aside>
